####
##  this is frontend source
##  will compile to www/private/js/app.js
##  refer to: https://nim-lang.org/docs/lib.html#pure-libraries-modules-for-the-js-backend
####

import utils/ffi
import index

if not window.toJs.navigator.serviceWorker.isNil:
  window.toJs.addEventListener("load", proc () =
    window.toJs.navigator.serviceWorker.register("/js/sw.js")
    .then(proc (res: JsObject): Future[JsObject] =
      console.log("service worker registered")
    )
  )
